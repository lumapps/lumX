<div class="lumx-data-table">
    <lx-table
        lx-has-before="lx.hasBulk"
        lx-has-dividers="lx.hasDividers"
        lx-is-clickable="lx.isClickable"
        lx-theme="{{ lx.theme }}"
    >
        <lx-table-head>
            <lx-table-row>
                <lx-table-cell-head ng-if="lx.hasBulk">
                    <lx-checkbox
                        lx-theme="{{ lx.theme }}"
                        ng-click="lx.toggleAllSelected()"
                        ng-checked="lx.allRowsSelected"
                        lx-stop-propagation="click keydown"
                    ></lx-checkbox>
                </lx-table-cell-head>

                <lx-table-cell-head
                    lx-icon="{{ th.icon }}"
                    lx-is-sortable="th.isSortable"
                    lx-scope="col"
                    lx-sort-order="{{ th.sortOrder }}"
                    ng-click="lx.sort(th)"
                    lx-enter-keydown="lx.sort(th)"
                    ng-repeat="th in lx.thead"
                >
                    {{ th.label }}
                </lx-table-cell-head>
            </lx-table-row>
        </lx-table-head>

        <lx-table-body>
            <lx-table-row
                lx-is-selected="tr.lxDataTableSelected"
                ng-repeat="tr in lx.tbody"
                ng-click="lx.toggleSelection(tr)"
                lx-enter-keydown="lx.toggleSelection(tr)"
            >
                <lx-table-cell-body ng-if="lx.hasBulk">
                    <lx-checkbox
                        lx-theme="{{ lx.theme }}"
                        ng-click="lx.toggleSelection(tr)"
                        ng-checked="tr.lxDataTableSelected"
                        lx-stop-propagation="click keydown"
                    ></lx-checkbox>
                </lx-table-cell-body>

                <lx-table-cell-body ng-repeat="th in lx.thead">
                    <span ng-if="!th.format">{{ tr[th.name] }}</span>
                    <div ng-bind-html="lx.$sce.trustAsHtml(th.format(tr))" ng-if="th.format"></div>
                </lx-table-cell-body>
            </lx-table-row>
        </lx-table-body>
    </lx-table>
</div>
